<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">react-native-ble-plx/src/Device.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/Polidea/react-native-ble-plx" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">src</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/react-native-ble-plx/src/BleManager.js~BleManager.html">BleManager</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/react-native-ble-plx/src/Characteristic.js~Characteristic.html">Characteristic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/react-native-ble-plx/src/Device.js~Device.html">Device</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/react-native-ble-plx/src/Service.js~Service.html">Service</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-fullUUID">fullUUID</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">react-native-ble-plx/src/Device.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">// @flow
&apos;use strict&apos;;

import BleManager from &apos;./BleManager&apos;
import Characteristic from &apos;./Characteristic&apos;
import Service from &apos;./Service&apos;
import type { Subscription, ConnectionOptions } from &apos;./BleManager&apos;

/**
 * Internal class describing Device format which
 * is exchanged between native modules and react native.
 * 
 * @access private
 * @class NativeDevice
 */
class NativeDevice {
    id: string
    name: ?string
    rssi: ?number

    // Advertisement
    manufacturerData: ?string
    serviceUUIDs: ?string[]
    txPowerLevel: ?number
    solicitedServiceUUIDs: ?string[]
    isConnectable: ?boolean
    overflowServiceUUIDs: ?string[]
    serviceData: ?{[service: string]: string }
}


/**
 * Device object.
 * 
 * @export
 * @class Device
 * @extends {NativeDevice}
 */
export default class Device extends NativeDevice {

    _manager: BleManager

    /**
     * Private {@link Device} constructor.
     * 
     * @param {NativeDevice} props - NativeDevice properties to be copied.
     * @param {BleManager} manager - Current BleManager instance.
     * @access private
     *
     * @memberOf Device
     */
    constructor(props: NativeDevice, manager: BleManager) {
        super()
        this._manager = manager
        /** @type {string} 
         *  @desc Device identifier. */
        this.id = props.id
        /** @type {?string} 
         *  @desc Device name, may be `null`. */
        this.name = props.name
        /** @type {?number} 
         *  @desc Device Received Signal Strength Indication value, may be `null`. */
        this.rssi = props.rssi
        /** @type {?string} 
         *  @desc Device Manufacturer Data in Base64 format, may be `null`. */
        this.manufacturerData = props.manufacturerData
        /** @type {?string[]} 
         *  @desc UUIDs of advertised {@link Service}s, may be `null`. */
        this.serviceUUIDs = props.serviceUUIDs
        /** @type {?number} 
         *  @desc Transmitted power level, may be `null`. */
        this.txPowerLevel = props.txPowerLevel
        /** @type {?string[]} 
         *  @desc Solicited {@link Service} UUIDs, may be `null`. */
        this.solicitedServiceUUIDs = props.solicitedServiceUUIDs
        /** @type {?boolean} 
         *  @desc Is Device connectable (iOS only), may be `null`. */
        this.isConnectable = props.isConnectable
        /** @type {?string[]} 
         *  @desc Overflow {@link Service} UUIDs (iOS only), may be `null`. */
        this.overflowServiceUUIDs = props.overflowServiceUUIDs
        /** @type {?{[service:string]:string}} 
         *  @desc Data related to specific {@link Service}, may be `null`. */
        this.serviceData = props.serviceData
    }

    /**
     * {@link BleManager.connectToDevice} with partially filled arguments.
     * 
     * @param {?ConnectionOptions} options - Platform specific options for connection establishment. Not used currently.
     * @returns {Promise&lt;Device&gt;} Connected {@link Device} object if successful.
     *  
     * @memberOf Device
     */
    async connect(options: ?ConnectionOptions): Promise&lt;Device&gt; {
        return this._manager.connectToDevice(this.id, options)
    }

    /**
     * {@link BleManager.cancelDeviceConnection} with partially filled arguments.
     * 
     * @returns {Promise&lt;Device&gt;} Returns closed {@link Device} when operation is successful.
     * 
     * @memberOf Device
     */
    async cancelConnection(): Promise&lt;Device&gt; {
        return this._manager.cancelDeviceConnection(this.id)
    }

    /**
     * {@link BleManager.isDeviceConnected} with partially filled arguments.
     * 
     * @returns {Promise&lt;boolean&gt;} - Promise which emits `true` if device is connected, and `false` otherwise.
     * 
     * @memberOf Device
     */
    async isConnected(): Promise&lt;boolean&gt; {
        return this._manager.isDeviceConnected(this.id)
    }

    /**
     * {@link BleManager.onDeviceDisconnected} with partially filled arguments.
     * 
     * @param {function(error: ?Error, device: Device)} listener - callback returning error as a reason of disconnection 
     * if available and {@link Device} object.
     * @returns {Subscription} Subscription on which `remove()` function can be called to unsubscribe.
     * 
     * @memberOf Device
     */
    onDisconnected(listener: (error: ?Error, device: Device) =&gt; void): Subscription {
        return this._manager.onDeviceDisconnected(this.id, listener)
    }

    /**
     * {@link BleManager.discoverAllServicesAndCharacteristicsForDevice} with partially filled arguments.
     * 
     * @returns {Promise&lt;Device&gt;} - Promise which emits {@link Device} object if all available services and 
     * characteristics have been discovered.
     * 
     * @memberOf Device
     */
    async discoverAllServicesAndCharacteristics(): Promise&lt;Device&gt; {
        return this._manager.discoverAllServicesAndCharacteristicsForDevice(this.id)
    }

    /**
     * {@link BleManager.servicesForDevice} with partially filled arguments.
     * 
     * @returns {Promise&lt;Service[]&gt;} - Promise which emits array of {@link Service} objects which are discovered by this
     * device.
     * 
     * @memberOf Device
     */
    async services(): Promise&lt;Service[]&gt; {
        return this._manager.servicesForDevice(this.id)
    }

    /**
     * {@link BleManager.characteristicsForDevice} with partially filled arguments.
     * 
     * @param {string} serviceUUID - {@link Service} UUID.
     * @returns {Promise&lt;Characteristic[]&gt;} - Promise which emits array of {@link Characteristic} objects which are 
     * discovered for a {@link Device} in specified {@link Service}.
     * 
     * @memberOf Device
     */
    async characteristicsForService(serviceUUID: string): Promise&lt;Characteristic[]&gt; {
        return this._manager.characteristicsForDevice(this.id, serviceUUID)
    }

    /**
     * {@link BleManager.readCharacteristicForDevice} with partially filled arguments.
     * 
     * @param {string} serviceUUID - {@link Service} UUID.
     * @param {string} characteristicUUID - {@link Characteristic} UUID.
     * @param {?string} transactionId - optional `transactionId` which can be used in {@link cancelTransaction} function.
     * @returns {Promise&lt;Characteristic&gt;} - Promise which emits first {@link Characteristic} object matching specified 
     * UUID paths. Latest value of {@link Characteristic} will be stored inside returned object.
     * 
     * @memberOf Device
     */
    async readCharacteristicForService(
        serviceUUID: string,
        characteristicUUID: string,
        transactionId: ?string): Promise&lt;Characteristic&gt; {
        return this._manager.readCharacteristicForDevice(this.id, serviceUUID, characteristicUUID, transactionId)
    }


    /**
     * {@link BleManager.writeCharacteristicWithResponseForDevice} with partially filled arguments.
     * 
     * @param {string} serviceUUID - {@link Service} UUID.
     * @param {string} characteristicUUID - {@link Characteristic} UUID.
     * @param {string} valueBase64 - Value in Base64 format.
     * @param {?string} transactionId - optional `transactionId` which can be used in {@link cancelTransaction} function.
     * @returns {Promise&lt;Characteristic&gt;} - Promise which emits first {@link Characteristic} object matching specified 
     * UUID paths. Latest value of characteristic may not be stored inside returned object.
     * 
     * @memberOf Device
     */
    async writeCharacteristicWithResponseForService(
        serviceUUID: string,
        characteristicUUID: string,
        valueBase64: string,
        transactionId: ?string): Promise&lt;Characteristic&gt; {
        return this._manager.writeCharacteristicWithResponseForDevice(this.id,
            serviceUUID,
            characteristicUUID,
            valueBase64,
            transactionId)
    }

    /**
     * {@link BleManager.writeCharacteristicWithoutResponseForDevice} with partially filled arguments.
     * 
     * @param {string} serviceUUID - {@link Service} UUID.
     * @param {string} characteristicUUID - {@link Characteristic} UUID.
     * @param {string} valueBase64 - Value in Base64 format.
     * @param {?string} transactionId - optional `transactionId` which can be used in {@link cancelTransaction} function.
     * @returns {Promise&lt;Characteristic&gt;} - Promise which emits first {@link Characteristic} object matching specified 
     * UUID paths. Latest value of characteristic may not be stored inside returned object.
     * 
     * @memberOf Device
     */
    async writeCharacteristicWithoutResponseForService(
        serviceUUID: string,
        characteristicUUID: string,
        valueBase64: string,
        transactionId: ?string): Promise&lt;Characteristic&gt; {
        return this._manager.writeCharacteristicWithoutResponseForDevice(this.id,
            serviceUUID,
            characteristicUUID,
            valueBase64,
            transactionId)
    }

    /**
     * {@link BleManager.monitorCharacteristicForDevice} with partially filled arguments.
     * 
     * @param {string} serviceUUID - {@link Service} UUID.
     * @param {string} characteristicUUID - {@link Characteristic} UUID.
     * @param {function(error: ?Error, characteristic: ?Characteristic)} listener - callback which emits 
     * {@link Characteristic} objects with modified value for each notification.
     * @param {?string} transactionId - optional `transactionId` which can be used in {@link cancelTransaction} function.
     * @returns {Subscription} Subscription on which `remove()` function can be called to unsubscribe.
     * 
     * @memberOf Device
     */
    monitorCharacteristicForService(
        serviceUUID: string,
        characteristicUUID: string,
        listener: (error: ?Error, characteristic: ?Characteristic) =&gt; void,
        transactionId: ?string): Subscription {
        return this._manager.monitorCharacteristicForDevice(this.id,
            serviceUUID,
            characteristicUUID,
            listener,
            transactionId)
    }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
